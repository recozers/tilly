option_settings:
  # Use smallest instance type suitable for Node.js app
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.micro
    RootVolumeSize: 8
    RootVolumeType: gp3
  
  # Optimize auto-scaling to reduce costs
  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 2
    Cooldown: 600
  
  # Enable cost-effective monitoring
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: basic
    
  # Reduce unnecessary environment variables
  aws:elasticbeanstalk:application:environment:
    # Remove expensive ICU data if not needed for internationalization
    # NODE_ICU_DATA: "/var/app/current/node_modules/full-icu"
    
# Cost monitoring commands
commands:
  01_cost_alert:
    command: |
      echo "ðŸ’° COST OPTIMIZATION APPLIED:"
      echo "- Instance: t3.micro (smallest suitable)"
      echo "- Root volume: 8GB gp3 (cost-effective)"
      echo "- Auto-scaling: min=1, max=2"
      echo "- CloudWatch logs: 3-day retention"
      echo "- Removed unnecessary Node.js installation"
    ignoreErrors: true